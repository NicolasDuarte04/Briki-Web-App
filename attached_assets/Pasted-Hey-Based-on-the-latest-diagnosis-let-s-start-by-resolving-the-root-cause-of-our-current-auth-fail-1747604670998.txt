Hey! Based on the latest diagnosis, let’s start by resolving the root cause of our current auth failures: the **backend schema mismatch**. Here's what I need you to focus on first:

---

### **Phase 1 – Fix Schema Mismatch & Registration**

1. **Align `shared/schema.ts` with the actual PostgreSQL schema**  
   Only use the fields that exist in the database. These are:
   - `id`
   - `email`
   - `password`
   - `role`
   - `name`
   - `username` (if still used)
   - `company_profile` (if used for partners)

   Remove references to `firstName`, `lastName`, `profileImageUrl`, `googleId`, or any other fields that aren’t in the DB.

2. **Refactor the `createUser()` logic in `server/storage.ts`**  
   - Replace all `db.query.raw` or raw SQL with **Drizzle ORM** insert functions.
   - Ensure insertion only includes the valid schema fields listed above.
   - Add error handling to catch and report meaningful validation or DB errors to the frontend.

3. **Fix the Google login flow**
   - When a user signs in via Google, make sure they are properly inserted in the DB with at least: `email`, `name`, `googleId`.
   - Skip optional fields or create defaults if necessary.

4. **Ensure both dev and prod environments are using the same schema**
   - Verify the environment-specific DBs are consistent.
   - Confirm local and production behavior is matching.

---

### **Phase 2 – UI Consistency and Form Polish (after registration works)**

When backend registration is working again, please proceed to:

1. **Unify the visual layout** between Login and Sign Up screens:
   - Use the same container size, padding, margin, and font styles.
   - Match button styling and spacing between both forms.

2. **Improve validation feedback**
   - Ensure confirmPassword and password validation messages are always displayed clearly.
   - Display field-level success indicators (green borders/checkmarks).
   - Make sure error messages are helpful, and toast errors reflect real issues (not generic failures).

3. **Implement Forgot Password Flow** (optional after stabilization)

---

Let me know once registration and login are working across both environments, and we’ll review progress before tackling the next priorities.

Thanks!