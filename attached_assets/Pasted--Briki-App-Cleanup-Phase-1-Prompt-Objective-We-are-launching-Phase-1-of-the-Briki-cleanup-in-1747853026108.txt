// Briki App Cleanup – Phase 1 Prompt
/*
Objective:
We are launching Phase 1 of the Briki cleanup initiative. Please do not implement anything unrelated to these tasks yet. Focus only on eliminating layout duplication, broken redirects, and legacy files that are still being referenced inappropriately.

Use this route map as the source of truth (from App.tsx):

/                           - Landing Page
/auth                       - Authentication Page
/features, /pricing, etc.   - Informational Pages
/trip-info                  - Trip Information Entry
/insurance-categories       - Insurance Category Selection
/explore/[category]         - Category-specific Exploration (travel, auto, health, pet)
/compare-plans              - Plan Comparison
/active-plans               - User's Active Plans
/profile                    - User Profile
/company                    - Company Landing Page
/company-login              - Company Login
/company-register           - Company Registration
/company-dashboard          - (Deprecated – should NOT be used)
/company-dashboard-redesigned - NEW Company Dashboard (use this)
/company-dashboard/upload   - Plan Upload Interface
/company-dashboard/analysis - Analytics Interface
/company-dashboard/marketplace - Marketplace Management
/company-dashboard/settings - Company Settings
/assistant                  - AI Assistant Interface

----------------------------------------------------
PHASE 1: CRITICAL CLEANUP TASKS
----------------------------------------------------

✅ 1. REMOVE LEGACY PAGE FILES

- [ ] Delete or archive the following deprecated pages from `/client/src/pages`:
    • company-dashboard-page.tsx
    • company-login-page.tsx
    • company-register-page.tsx

These must NOT be used. We are keeping only:
    • company-dashboard-page-redesigned.tsx
    • company-login-new.tsx
    • company-register-new.tsx

✅ 2. FIX NAVIGATION & REDIRECT INCONSISTENCIES

- [ ] Ensure that all CTAs (e.g. from Landing Page, Navbar, Footer, Sign Up buttons) route to:
    • B2C login/signup: /auth
    • B2B login: /company-login-new
    • B2B register: /company-register-new

- [ ] After successful company registration/login, redirect ONLY to:
    • /company-dashboard-redesigned

Double check `AuthContext.tsx`, `useAuth.ts`, and relevant `useNavigate` calls in:
    • company-login-new.tsx
    • company-register-new.tsx

✅ 3. CONSOLIDATE LAYOUTS

- [ ] Remove direct layout usage from within pages like `/compare-plans.tsx` and `/trip-info.tsx`.
    • These pages should NOT wrap themselves with MainLayout or CompanyLayout. Layouts are already applied globally in `App.tsx`.

- [ ] Verify the following layout files:
    • /client/src/components/layout/MainLayout.tsx
    • /client/src/components/layout/CompanyLayout.tsx

Ensure:
    • B2C routes use MainLayout
    • B2B routes use CompanyLayout
    • No duplication or nesting of layouts

✅ 4. DEPRECATE navbar.tsx

- [ ] Delete or archive `/client/src/components/navbar.tsx`
- [ ] Keep and enforce use of `/client/src/components/navbar-new.tsx` across all B2C pages
- [ ] Refactor any lingering imports using the old navbar file

✅ 5. FIX /compare-plans PAGE LAYOUT

In `/client/src/pages/compare-plans.tsx`:
- [ ] Remove `setTimeout` used to simulate loading. Replace with proper async logic using `try/catch` and `await calculateBestValues()`.
- [ ] Use `useEffect` to handle the loading and hydration flow
- [ ] Use Framer Motion’s `layout` prop to prevent layout twitching
- [ ] Add Zustand `.rehydrate()` call inside useEffect to avoid hydration mismatch

✅ 6. CHECK ROUTER CONFIGURATION

In `/client/src/App.tsx`:
- [ ] Confirm no deprecated paths are still in use (e.g. /company-dashboard instead of /company-dashboard-redesigned)
- [ ] Confirm layout wrappers are correctly applied only once per route level

Let me know once this is complete so we can validate all links, verify layouts, and move on to Phase 2 (authentication logic, store persistence, and form/component standardization).
*/